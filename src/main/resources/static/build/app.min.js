!function(){"use-strict";angular.module("app.core",[])}();
!function(){"use-strict";function o(o){var r=this;r.brand="movie db"}angular.module("app.core").controller("NavbarController",o),o.$inject=["$scope"]}();
!function(){"use-strict";angular.module("app.services",[])}();
!function(){"use-strict";function n(n){return n._}angular.module("app.services").factory("_",n),n.$inject=["$window"]}();
!function(){"use-strict";function n(n,t){function e(t){return n({method:"GET",url:"http://api.themoviedb.org/3/search/movie?query="+t+"&api_key="+a}).then(function(n){return n},function(n){return n})}function r(){return n({method:"GET",url:"http://api.themoviedb.org/3/genre/movie/list?api_key="+a}).then(function(n){return n},function(n){return n})}function u(){return n({method:"GET",url:f+"/api/movies"}).then(function(n){return n},function(n){return n})}function i(t){return n({method:"GET",url:f+"/api/movies/"+t}).then(function(n){return n},function(n){return n})}function o(t){return n({method:"POST",data:t,url:f+"/api/movies"}).then(function(n){return n},function(n){return n})}function c(t){return n({method:"DELETE",url:f+"/api/movies/"+t}).then(function(n){return n},function(n){return n})}const f=t.location.origin,a="2070102b343bf69650bde4b0063cd085";var h={search:e,getGenres:r,getAll:u,get:i,add:o,remove:c};return h}angular.module("app.services").factory("movieService",n),n.$inject=["$http","$window"]}();
!function(){"use-strict";angular.module("app.myMovies",[])}();
!function(){"use-strict";function e(e,o,i,n,s){function t(e){i.remove(e).then(function(i){n.each(c.myMovies,function(i,s){n.isMatch(i,{_id:e})&&(c.myMovies.splice(s,1),o.showSuccess("Movie removed"))})})}var c=this;c.title="My Movies",c.myMovies=s,c.remove=t}angular.module("app.myMovies").controller("MyMoviesController",e),e.$inject=["$scope","notifications","movieService","_","myMovies"]}();
!function(){"use-strict";function e(e){e.state("core.my-movies",{url:"/my-movies",templateUrl:"app/my-movies/my-movies.html",controller:"MyMoviesController",controllerAs:"vm",resolve:{myMovies:["movieService",function(e){return e.getAll().then(function(e){return e.data})}]}})}angular.module("app.myMovies").config(e),e.$inject=["$stateProvider"]}();
!function(){"use-strict";angular.module("app.home",[])}();
!function(){"use-strict";function e(e,t,n,a,o){function s(e){e?n.search(e).then(function(e){angular.forEach(e.data.results,function(e){e.poster=e.poster_path?"http://image.tmdb.org/t/p/w92"+e.poster_path:"app/images/noposter.png",e.genres=[],angular.forEach(e.genre_ids,function(t){a.each(o,function(n,o){a.isMatch(n,{id:t})&&e.genres.push(n.name)})})}),c.results=e.data.results}):r()}function r(){delete c.results,c.movie=""}function i(e){n.add(e).then(function(n){400===n.status?t.showError(e.title+" already added"):t.showSuccess(n.data.title+" added")})}var c=this;c.title="movie db",c.search=s,c.add=i}angular.module("app.home").controller("HomeController",e),e.$inject=["$scope","notifications","movieService","_","genres"]}();
!function(){"use-strict";function e(e){e.state("core.home",{url:"/",templateUrl:"app/home/home.html",controller:"HomeController",controllerAs:"vm",resolve:{genres:["movieService",function(e){return e.getGenres().then(function(e){return e.data.genres})}]}})}angular.module("app.home").config(e),e.$inject=["$stateProvider"]}();
!function(){"use-strict";function a(a){a.state("core",{abstract:!0,views:{main:{templateUrl:"app/core/main/main.html"},navbar:{templateUrl:"app/core/navbar/navbar.html",controller:"NavbarController",controllerAs:"vm"}}})}angular.module("app.core").config(a),a.$inject=["$stateProvider"]}();
!function(){"use-strict";function e(e,t,i,o){t.html5Mode(!0),i.otherwise("/404"),i.when("/index.html","/"),e.state("core.404",{url:"/404",templateUrl:"app/core/error/404.html"}),function(){o.setAutoHide(!0),o.setHideDelay(500),o.setAcceptHTML(!1),o.setAutoHideAnimation("fadeOutNotifications"),o.setAutoHideAnimationDelay(1e3)}()}angular.module("app",["ui.router","ngNotificationsBar","ngSanitize","app.core","app.home","app.myMovies","app.services"]).config(e),e.$inject=["$stateProvider","$locationProvider","$urlRouterProvider","notificationsConfigProvider"]}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC9jb3JlL2NvcmUubW9kdWxlLmpzIiwiYXBwL2NvcmUvbmF2YmFyL25hdmJhci5jb250cm9sbGVyLmpzIiwiYXBwL3NlcnZpY2VzL3NlcnZpY2UubW9kdWxlLmpzIiwiYXBwL3NlcnZpY2VzL3VuZGVyc2NvcmUuc2VydmljZS5qcyIsImFwcC9zZXJ2aWNlcy9tb3ZpZS5zZXJ2aWNlLmpzIiwiYXBwL215LW1vdmllcy9teS1tb3ZpZXMubW9kdWxlLmpzIiwiYXBwL215LW1vdmllcy9teS1tb3ZpZXMuY29udHJvbGxlci5qcyIsImFwcC9teS1tb3ZpZXMvbXktbW92aWVzLmNvbmZpZy5qcyIsImFwcC9ob21lL2hvbWUubW9kdWxlLmpzIiwiYXBwL2hvbWUvaG9tZS5jb250cm9sbGVyLmpzIiwiYXBwL2hvbWUvaG9tZS5jb25maWcuanMiLCJhcHAvY29yZS9jb3JlLmNvbmZpZy5qcyIsImFwcC9hcHAubW9kdWxlLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJOYXZiYXJDb250cm9sbGVyIiwiJHNjb3BlIiwidm0iLCJ0aGlzIiwiYnJhbmQiLCJjb250cm9sbGVyIiwiJGluamVjdCIsIl8iLCIkd2luZG93IiwiZmFjdG9yeSIsIm1vdmllU2VydmljZSIsIiRodHRwIiwic2VhcmNoIiwibW92aWUiLCJtZXRob2QiLCJ1cmwiLCJhcGlLZXkiLCJ0aGVuIiwicmVzcG9uc2UiLCJlcnIiLCJnZXRHZW5yZXMiLCJnZXRBbGwiLCJvcmlnaW4iLCJnZXQiLCJpZCIsImFkZCIsImRhdGEiLCJyZW1vdmUiLCJsb2NhdGlvbiIsIk15TW92aWVzQ29udHJvbGxlciIsIm5vdGlmaWNhdGlvbnMiLCJteU1vdmllcyIsIl9pZCIsImVhY2giLCJpbmRleCIsImlzTWF0Y2giLCJzcGxpY2UiLCJzaG93U3VjY2VzcyIsInRpdGxlIiwiY29uZmlnIiwiJHN0YXRlUHJvdmlkZXIiLCJzdGF0ZSIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlckFzIiwicmVzb2x2ZSIsIkhvbWVDb250cm9sbGVyIiwiZ2VucmVzIiwiZm9yRWFjaCIsInJlc3VsdHMiLCJyZXN1bHQiLCJwb3N0ZXIiLCJwb3N0ZXJfcGF0aCIsImdlbnJlX2lkcyIsImdlbnJlX2lkIiwiZ2VucmUiLCJwdXNoIiwibmFtZSIsImNsZWFyIiwic3RhdHVzIiwic2hvd0Vycm9yIiwiYWJzdHJhY3QiLCJ2aWV3cyIsIm1haW4iLCJuYXZiYXIiLCIkbG9jYXRpb25Qcm92aWRlciIsIiR1cmxSb3V0ZXJQcm92aWRlciIsIm5vdGlmaWNhdGlvbnNDb25maWdQcm92aWRlciIsImh0bWw1TW9kZSIsIm90aGVyd2lzZSIsIndoZW4iLCJzZXRBdXRvSGlkZSIsInNldEhpZGVEZWxheSIsInNldEFjY2VwdEhUTUwiLCJzZXRBdXRvSGlkZUFuaW1hdGlvbiIsInNldEF1dG9IaWRlQW5pbWF0aW9uRGVsYXkiXSwibWFwcGluZ3MiOiJDQUFBLFdBRUksWUFFQUEsU0FBUUMsT0FBTztDQ0puQixXQUVJLFlBTUEsU0FBU0MsR0FBaUJDLEdBQ3RCLEdBQUlDLEdBQUtDLElBQ1RELEdBQUdFLE1BQVEsV0FOZk4sUUFBUUMsT0FBTyxZQUFZTSxXQUFXLG1CQUFvQkwsR0FFMURBLEVBQWlCTSxTQUFXO0NDTmhDLFdBRUksWUFFQVIsU0FBUUMsT0FBTztDQ0puQixXQUVJLFlBTUEsU0FBU1EsR0FBRUMsR0FFUCxNQUFPQSxHQUFRRCxFQU5uQlQsUUFBUUMsT0FBTyxnQkFBZ0JVLFFBQVEsSUFBS0YsR0FFNUNBLEVBQUVELFNBQVc7Q0NOakIsV0FFSSxZQU1BLFNBQVNJLEdBQWFDLEVBQU9ILEdBZXpCLFFBQVNJLEdBQU9DLEdBQ1osTUFBT0YsSUFDSEcsT0FBUSxNQUNSQyxJQUFLLGtEQUFvREYsRUFBUSxZQUFjRyxJQUNoRkMsS0FBSyxTQUFpQkMsR0FDckIsTUFBT0EsSUFDUixTQUFlQyxHQUNkLE1BQU9BLEtBSWYsUUFBU0MsS0FDTCxNQUFPVCxJQUNIRyxPQUFRLE1BQ1JDLElBQUssd0RBQStEQyxJQUNyRUMsS0FBSyxTQUFpQkMs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SyxPQUNMMkIsWUFBYSw0QkFJckIsV0FFSXdCLEVBQTRCSSxhQUFZLEdBRXhDSixFQUE0QkssYUFBYSxLQUV6Q0wsRUFBNEJNLGVBQWMsR0FFMUNOLEVBQTRCTyxxQkFBcUIsd0JBRWpEUCxFQUE0QlEsMEJBQTBCLFFBcEM5RDVFLFFBQVFDLE9BQU8sT0FDWCxZQUNBLHFCQUNBLGFBQ0EsV0FDQSxXQUNBLGVBQ0EsaUJBRUN3QyxPQUFPQSxHQUVaQSxFQUFPakMsU0FBVyxpQkFBa0Isb0JBQXFCLHFCQUFzQiIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKCkge1xuXG4gICAgJ3VzZS1zdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5jb3JlJywgW10pO1xuXG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG5cbiAgICAndXNlLXN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLmNvcmUnKS5jb250cm9sbGVyKCdOYXZiYXJDb250cm9sbGVyJywgTmF2YmFyQ29udHJvbGxlcik7XG5cbiAgICBOYXZiYXJDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZSddO1xuXG4gICAgZnVuY3Rpb24gTmF2YmFyQ29udHJvbGxlcigkc2NvcGUpIHtcbiAgICAgICAgdmFyIHZtID0gdGhpcztcbiAgICAgICAgdm0uYnJhbmQgPSAnbW92aWUgZGInO1xuICAgICAgICBcbiAgICB9XG5cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcblxuICAgICd1c2Utc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAuc2VydmljZXMnLCBbXSk7XG5cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcblxuICAgICd1c2Utc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAuc2VydmljZXMnKS5mYWN0b3J5KCdfJywgXyk7XG5cbiAgICBfLiRpbmplY3QgPSBbJyR3aW5kb3cnXTtcblxuICAgIGZ1bmN0aW9uIF8oJHdpbmRvdykge1xuXG4gICAgICAgIHJldHVybiAkd2luZG93Ll87XG5cbiAgICB9XG5cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcblxuICAgICd1c2Utc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAuc2VydmljZXMnKS5mYWN0b3J5KCdtb3ZpZVNlcnZpY2UnLCBtb3ZpZVNlcnZpY2UpO1xuXG4gICAgbW92aWVTZXJ2aWNlLiRpbmplY3QgPSBbJyRodHRwJywgJyR3aW5kb3cnXTtcblxuICAgIGZ1bmN0aW9uIG1vdmllU2VydmljZSgkaHR0cCwgJHdpbmRvdykge1xuXG4gICAgICAgIGNvbnN0IG9yaWdpbiA9ICR3aW5kb3cubG9jYXRpb24ub3JpZ2luO1xuICAgICAgICBjb25zdCBhcGlLZXkgPSAnMjA3MDEwMmIzNDNiZjY5NjUwYmRlNGIwMDYzY2QwODUnO1xuXG4gICAgICAgIC8vIEltcGxlbWVudCAkUmVzb3VyY2UgZm9yIHBlcnNvbmFsIGRiXG4gICAgICAgIHZhciBtb3ZpZVNlcnZpY2UgPSB7XG4gICAgICAgICAgICBzZWFyY2g6IHNlYXJjaCxcbiAgICAgICAgICAgIGdldEdlbnJlczogZ2V0R2VucmVzLFxuICAgICAgICAgICAgZ2V0QWxsOiBnZXRBbGwsXG4gICAgICAgICAgICBnZXQ6IGdldCxcbiAgICAgICAgICAgIGFkZDogYWRkLFxuICAgICAgICAgICAgcmVtb3ZlOiByZW1vdmVcbiAgICAgICAgfTtcblxuICAgICAgICBmdW5jdGlvbiBzZWFyY2gobW92aWUpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cCh7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgICAgICB1cmw6ICdodHRwOi8vYXBpLnRoZW1vdmllZGIub3JnLzMvc2VhcmNoL21vdmllP3F1ZXJ5PScgKyBtb3ZpZSArICcmYXBpX2tleT0nICsgYXBpS2V5XG4gICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3MocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbiBlcnJvcihlcnIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRHZW5yZXMoKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAoe1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICAgICAgdXJsOiAnaHR0cDovL2FwaS50aGVtb3ZpZWRiLm9yZy8zL2dlbnJlL21vdmllL2xpc3QnICsgJz9hcGlfa2V5PScgKyBhcGlLZXlcbiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gc3VjY2VzcyhyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIGVycm9yKGVycikge1xuICAgICAgICAgICAgICAgIHJldHVybiBlcnI7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldEFsbCgpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cCh7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgICAgICB1cmw6IG9yaWdpbiArICcvYXBpL21vdmllcydcbiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gc3VjY2VzcyhyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIGVycm9yKGVycikge1xuICAgICAgICAgICAgICAgIHJldHVybiBlcnI7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldChpZCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwKHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgICAgIHVybDogb3JpZ2luICsgJy9hcGkvbW92aWVzLycgKyBpZFxuICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiBzdWNjZXNzKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24gZXJyb3IoZXJyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycjtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gYWRkKG1vdmllKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAoe1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGRhdGE6IG1vdmllLFxuICAgICAgICAgICAgICAgIHVybDogb3JpZ2luICsgJy9hcGkvbW92aWVzJ1xuICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiBzdWNjZXNzKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24gZXJyb3IoZXJyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycjtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlKGlkKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAoe1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICAgICAgICAgICAgdXJsOiBvcmlnaW4gKyAnL2FwaS9tb3ZpZXMvJyArIGlkXG4gICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3MocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbiBlcnJvcihlcnIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbW92aWVTZXJ2aWNlO1xuICAgIH1cblxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuXG4gICAgJ3VzZS1zdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5teU1vdmllcycsIFtdKTtcblxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuXG4gICAgJ3VzZS1zdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5teU1vdmllcycpLmNvbnRyb2xsZXIoJ015TW92aWVzQ29udHJvbGxlcicsIE15TW92aWVzQ29udHJvbGxlcik7XG5cbiAgICBNeU1vdmllc0NvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJ25vdGlmaWNhdGlvbnMnLCAnbW92aWVTZXJ2aWNlJywgJ18nLCAnbXlNb3ZpZXMnXTtcblxuICAgIGZ1bmN0aW9uIE15TW92aWVzQ29udHJvbGxlcigkc2NvcGUsIG5vdGlmaWNhdGlvbnMsIG1vdmllU2VydmljZSwgXywgbXlNb3ZpZXMpIHtcbiAgICAgICAgdmFyIHZtID0gdGhpcztcbiAgICAgICAgdm0udGl0bGUgPSAnTXkgTW92aWVzJztcbiAgICAgICAgdm0ubXlNb3ZpZXMgPSBteU1vdmllcztcbiAgICAgICAgdm0ucmVtb3ZlID0gcmVtb3ZlO1xuXG4gICAgICAgIGZ1bmN0aW9uIHJlbW92ZShfaWQpIHtcbiAgICAgICAgICAgIG1vdmllU2VydmljZS5yZW1vdmUoX2lkKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgXy5lYWNoKHZtLm15TW92aWVzLCBmdW5jdGlvbiAobW92aWUsIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChfLmlzTWF0Y2gobW92aWUsIHsgJ19pZCc6IF9pZCB9KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdm0ubXlNb3ZpZXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvbnMuc2hvd1N1Y2Nlc3MoJ01vdmllIHJlbW92ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgIH1cblxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuXG4gICAgJ3VzZS1zdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5teU1vdmllcycpLmNvbmZpZyhjb25maWcpO1xuXG4gICAgY29uZmlnLiRpbmplY3QgPSBbJyRzdGF0ZVByb3ZpZGVyJ107XG5cbiAgICBmdW5jdGlvbiBjb25maWcoJHN0YXRlUHJvdmlkZXIpIHtcblxuICAgICAgICAkc3RhdGVQcm92aWRlclxuICAgICAgICAgICAgLnN0YXRlKCdjb3JlLm15LW1vdmllcycsIHtcbiAgICAgICAgICAgICAgICB1cmw6ICcvbXktbW92aWVzJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9teS1tb3ZpZXMvbXktbW92aWVzLmh0bWwnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdNeU1vdmllc0NvbnRyb2xsZXInLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgICAgICByZXNvbHZlOiB7XG4gICAgICAgICAgICAgICAgICAgIG15TW92aWVzOiBbJ21vdmllU2VydmljZScsIGZ1bmN0aW9uIChtb3ZpZVNlcnZpY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtb3ZpZVNlcnZpY2UuZ2V0QWxsKCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgIH07XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuXG4gICAgJ3VzZS1zdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5ob21lJywgW10pO1xuXG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG5cbiAgICAndXNlLXN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLmhvbWUnKS5jb250cm9sbGVyKCdIb21lQ29udHJvbGxlcicsIEhvbWVDb250cm9sbGVyKTtcblxuICAgIEhvbWVDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICdub3RpZmljYXRpb25zJywgJ21vdmllU2VydmljZScsICdfJywgJ2dlbnJlcyddO1xuXG4gICAgZnVuY3Rpb24gSG9tZUNvbnRyb2xsZXIoJHNjb3BlLCBub3RpZmljYXRpb25zLCBtb3ZpZVNlcnZpY2UsIF8sIGdlbnJlcykge1xuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuICAgICAgICB2bS50aXRsZSA9ICdtb3ZpZSBkYic7XG4gICAgICAgIHZtLnNlYXJjaCA9IHNlYXJjaDtcbiAgICAgICAgdm0uYWRkID0gYWRkO1xuXG4gICAgICAgIGZ1bmN0aW9uIHNlYXJjaChtb3ZpZSkge1xuICAgICAgICAgICAgaWYgKG1vdmllKSB7XG4gICAgICAgICAgICAgICAgbW92aWVTZXJ2aWNlLnNlYXJjaChtb3ZpZSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKHJlc3BvbnNlLmRhdGEucmVzdWx0cywgZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucG9zdGVyID0gcmVzdWx0LnBvc3Rlcl9wYXRoID8gJ2h0dHA6Ly9pbWFnZS50bWRiLm9yZy90L3AvdzkyJyArIHJlc3VsdC5wb3N0ZXJfcGF0aCA6ICdhcHAvaW1hZ2VzL25vcG9zdGVyLnBuZyc7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuZ2VucmVzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmZvckVhY2gocmVzdWx0LmdlbnJlX2lkcywgZnVuY3Rpb24gKGdlbnJlX2lkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXy5lYWNoKGdlbnJlcywgZnVuY3Rpb24gKGdlbnJlLCBpbmRleCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXy5pc01hdGNoKGdlbnJlLCB7ICdpZCc6IGdlbnJlX2lkIH0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuZ2VucmVzLnB1c2goZ2VucmUubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIHZtLnJlc3VsdHMgPSByZXNwb25zZS5kYXRhLnJlc3VsdHM7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNsZWFyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBjbGVhcigpIHtcbiAgICAgICAgICAgIGRlbGV0ZSB2bS5yZXN1bHRzO1xuICAgICAgICAgICAgdm0ubW92aWUgPSAnJztcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGFkZChtb3ZpZSkge1xuICAgICAgICAgICAgbW92aWVTZXJ2aWNlLmFkZChtb3ZpZSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICBpZihyZXNwb25zZS5zdGF0dXMgPT09IDQwMCl7XG4gICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvbnMuc2hvd0Vycm9yKG1vdmllLnRpdGxlICsgJyBhbHJlYWR5IGFkZGVkJyk7XG4gICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvbnMuc2hvd1N1Y2Nlc3MocmVzcG9uc2UuZGF0YS50aXRsZSArICcgYWRkZWQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuXG4gICAgJ3VzZS1zdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5ob21lJykuY29uZmlnKGNvbmZpZyk7XG5cbiAgICBjb25maWcuJGluamVjdCA9IFsnJHN0YXRlUHJvdmlkZXInXTtcblxuICAgIGZ1bmN0aW9uIGNvbmZpZygkc3RhdGVQcm92aWRlcikge1xuXG4gICAgICAgICRzdGF0ZVByb3ZpZGVyXG4gICAgICAgICAgICAuc3RhdGUoJ2NvcmUuaG9tZScsIHtcbiAgICAgICAgICAgICAgICB1cmw6ICcvJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9ob21lL2hvbWUuaHRtbCcsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ0hvbWVDb250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICAgICAgcmVzb2x2ZToge1xuICAgICAgICAgICAgICAgICAgICBnZW5yZXM6IFsnbW92aWVTZXJ2aWNlJywgZnVuY3Rpb24gKG1vdmllU2VydmljZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1vdmllU2VydmljZS5nZXRHZW5yZXMoKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhLmdlbnJlcztcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgIH07XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuXG4gICAgJ3VzZS1zdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5jb3JlJykuY29uZmlnKGNvbmZpZyk7XG5cbiAgICBjb25maWcuJGluamVjdCA9IFsnJHN0YXRlUHJvdmlkZXInXTtcblxuICAgIGZ1bmN0aW9uIGNvbmZpZygkc3RhdGVQcm92aWRlcikge1xuICAgICAgICBcblxuICAgICAgICAkc3RhdGVQcm92aWRlclxuICAgICAgICAgICAgLnN0YXRlKCdjb3JlJywge1xuICAgICAgICAgICAgICAgIGFic3RyYWN0OiB0cnVlLFxuICAgICAgICAgICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgICAgICAgICAgICdtYWluJzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvY29yZS9tYWluL21haW4uaHRtbCdcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgJ25hdmJhcic6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYXBwL2NvcmUvbmF2YmFyL25hdmJhci5odG1sJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdOYXZiYXJDb250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJ1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgfVxuXG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG5cbiAgICAndXNlLXN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwJywgW1xuICAgICAgICAndWkucm91dGVyJyxcbiAgICAgICAgJ25nTm90aWZpY2F0aW9uc0JhcicsXG4gICAgICAgICduZ1Nhbml0aXplJyxcbiAgICAgICAgJ2FwcC5jb3JlJyxcbiAgICAgICAgJ2FwcC5ob21lJyxcbiAgICAgICAgJ2FwcC5teU1vdmllcycsXG4gICAgICAgICdhcHAuc2VydmljZXMnXG4gICAgXSlcbiAgICAgICAgLmNvbmZpZyhjb25maWcpO1xuXG4gICAgY29uZmlnLiRpbmplY3QgPSBbJyRzdGF0ZVByb3ZpZGVyJywgJyRsb2NhdGlvblByb3ZpZGVyJywgJyR1cmxSb3V0ZXJQcm92aWRlcicsICdub3RpZmljYXRpb25zQ29uZmlnUHJvdmlkZXInXTtcblxuICAgIGZ1bmN0aW9uIGNvbmZpZygkc3RhdGVQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlciwgbm90aWZpY2F0aW9uc0NvbmZpZ1Byb3ZpZGVyKSB7XG5cbiAgICAgICAgJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKHRydWUpO1xuICAgICAgICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCcvNDA0Jyk7XG4gICAgICAgICR1cmxSb3V0ZXJQcm92aWRlci53aGVuKCcvaW5kZXguaHRtbCcsICcvJyk7XG5cbiAgICAgICAgJHN0YXRlUHJvdmlkZXJcbiAgICAgICAgICAgIC5zdGF0ZSgnY29yZS40MDQnLCB7XG4gICAgICAgICAgICAgICAgdXJsOiAnLzQwNCcsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvY29yZS9lcnJvci80MDQuaHRtbCdcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIC8vbmdOb3RpZmljYXRpb24gY29uZmlndXJhdGlvblxuICAgICAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gYXV0byBoaWRlXG4gICAgICAgICAgICBub3RpZmljYXRpb25zQ29uZmlnUHJvdmlkZXIuc2V0QXV0b0hpZGUodHJ1ZSk7XG4gICAgICAgICAgICAvLyBkZWxheSBiZWZvcmUgaGlkZVxuICAgICAgICAgICAgbm90aWZpY2F0aW9uc0NvbmZpZ1Byb3ZpZGVyLnNldEhpZGVEZWxheSg1MDApO1xuICAgICAgICAgICAgLy8gc3VwcG9ydCBIVE1MXG4gICAgICAgICAgICBub3RpZmljYXRpb25zQ29uZmlnUHJvdmlkZXIuc2V0QWNjZXB0SFRNTChmYWxzZSk7XG4gICAgICAgICAgICAvLyBTZXQgYW4gYW5pbWF0aW9uIGZvciBoaWRpbmcgdGhlIG5vdGlmaWNhdGlvblxuICAgICAgICAgICAgbm90aWZpY2F0aW9uc0NvbmZpZ1Byb3ZpZGVyLnNldEF1dG9IaWRlQW5pbWF0aW9uKCdmYWRlT3V0Tm90aWZpY2F0aW9ucycpO1xuICAgICAgICAgICAgLy8gZGVsYXkgYmV0d2VlbiBhbmltYXRpb24gYW5kIHJlbW92aW5nIHRoZSBub2ZpdGljYXRpb25cbiAgICAgICAgICAgIG5vdGlmaWNhdGlvbnNDb25maWdQcm92aWRlci5zZXRBdXRvSGlkZUFuaW1hdGlvbkRlbGF5KDEwMDApO1xuICAgICAgICB9KSgpO1xuXG4gICAgfTtcblxufSkoKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
